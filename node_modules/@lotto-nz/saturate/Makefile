test:
	@BABEL_CACHE_PATH='./cache.json' ./node_modules/.bin/mocha -t 10000 --recursive test --compilers js:babel-register
test-cov:
	@BABEL_CACHE_PATH='./cache.json' ./node_modules/.bin/babel-node node_modules/isparta/bin/isparta cover node_modules/mocha/bin/_mocha -- -t 10000 --recursive test
test-coveralls:
	@make test-cov && ./node_modules/coveralls/bin/coveralls.js < coverage/lcov.info
test-cov-html:
	@rm -rf ./coverage && make test-cov && ./node_modules/.bin/istanbul report && open ./coverage/lcov-report/index.html
test-lint:
	@./node_modules/.bin/eslint --quiet --ignore-path .eslintignore -c .eslintrc.js src/** ; exit 0
clean:
	@rm -rf ./lib && mkdir ./lib
build:
	@babel src --out-dir lib
release:
	@./node_modules/.bin/semantic-release pre --analyze-commits=./node_modules/dead-majors && npm publish && ./node_modules/.bin/semantic-release post || true
.PHONY: test test-cov test-cov-html test-coveralls test-lint clean build
